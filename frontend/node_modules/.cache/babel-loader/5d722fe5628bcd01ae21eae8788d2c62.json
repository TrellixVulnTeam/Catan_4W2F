{"ast":null,"code":"import _slicedToArray from \"/home/agustina/Descargas/catan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/agustina/Descargas/catan/src/components/BuyCard.jsx\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport GameContext, { DEFAULT } from \"../GameContext\";\nimport api from \"../Api\";\nexport default function BuyCard() {\n  const _useContext = useContext(GameContext),\n        phase = _useContext.phase,\n        gameId = _useContext.gameId,\n        showModal = _useContext.showModal;\n\n  const validPhase = [DEFAULT].includes(phase);\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        canBuy = _useState2[0],\n        setCanBuy = _useState2[1];\n\n  const enabled = canBuy && validPhase;\n  useEffect(() => {\n    const fetchActions = async () => {\n      const _ref = await api.games.actions(gameId),\n            actions = _ref.data;\n\n      const hasBuyCard = actions.some(a => a.type === \"buy_card\");\n      setCanBuy(hasBuyCard);\n    };\n\n    fetchActions();\n    const interval = setInterval(() => fetchActions(), api.POLL_EVERY);\n    return () => clearInterval(interval);\n  }, [gameId]);\n\n  const tryBuy = () => {\n    const disabled = false;\n    const title = \"Buy Card\";\n    const body = \"It will cost you 1 grain, 1 ore and 1 wool. Are you sure you want to buy one?\";\n    const buttons = [{\n      text: \"Accept\",\n      primary: true,\n      callback: () => api.games.playAction(gameId, \"buy_card\", null)\n    }, {\n      text: \"Cancel\"\n    }];\n    showModal({\n      disabled,\n      title,\n      body,\n      buttons\n    });\n  };\n\n  const TextClasses = \"text-center text-xl self-center tracking-wider text-bold text-white font-cinzel\";\n  const CommonClasses = \"w-5/6 shadow-md rounded h-12\";\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    disabled: !enabled,\n    onClick: tryBuy,\n    className: \"\\n          h-16\\n          bg-blue-800\\n          w-full\\n          hover:bg-blue-900\\n          disabled:cursor-not-allowed\\n          disabled:opacity-50\\n          \".concat(CommonClasses, \"\\n          \").concat(TextClasses, \"\\n        \"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, \"Buy Card\"));\n}","map":{"version":3,"sources":["/home/agustina/Descargas/catan/src/components/BuyCard.jsx"],"names":["React","useState","useEffect","useContext","GameContext","DEFAULT","api","BuyCard","phase","gameId","showModal","validPhase","includes","canBuy","setCanBuy","enabled","fetchActions","games","actions","data","hasBuyCard","some","a","type","interval","setInterval","POLL_EVERY","clearInterval","tryBuy","disabled","title","body","buttons","text","primary","callback","playAction","TextClasses","CommonClasses"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AAEA,OAAOC,WAAP,IAAsBC,OAAtB,QAAqC,gBAArC;AACA,OAAOC,GAAP,MAAgB,QAAhB;AAEA,eAAe,SAASC,OAAT,GAAmB;AAAA,sBACKJ,UAAU,CAACC,WAAD,CADf;AAAA,QACxBI,KADwB,eACxBA,KADwB;AAAA,QACjBC,MADiB,eACjBA,MADiB;AAAA,QACTC,SADS,eACTA,SADS;;AAEhC,QAAMC,UAAU,GAAG,CAACN,OAAD,EAAUO,QAAV,CAAmBJ,KAAnB,CAAnB;;AAFgC,oBAGJP,QAAQ,CAAC,KAAD,CAHJ;AAAA;AAAA,QAGzBY,MAHyB;AAAA,QAGjBC,SAHiB;;AAIhC,QAAMC,OAAO,GAAGF,MAAM,IAAIF,UAA1B;AAEAT,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMc,YAAY,GAAG,YAAY;AAAA,mBACL,MAAMV,GAAG,CAACW,KAAJ,CAAUC,OAAV,CAAkBT,MAAlB,CADD;AAAA,YACjBS,OADiB,QACvBC,IADuB;;AAE/B,YAAMC,UAAU,GAAGF,OAAO,CAACG,IAAR,CAAaC,CAAC,IAAIA,CAAC,CAACC,IAAF,KAAW,UAA7B,CAAnB;AACAT,MAAAA,SAAS,CAACM,UAAD,CAAT;AACD,KAJD;;AAKAJ,IAAAA,YAAY;AACZ,UAAMQ,QAAQ,GAAGC,WAAW,CAAC,MAAMT,YAAY,EAAnB,EAAuBV,GAAG,CAACoB,UAA3B,CAA5B;AACA,WAAO,MAAMC,aAAa,CAACH,QAAD,CAA1B;AACD,GATQ,EASN,CAACf,MAAD,CATM,CAAT;;AAWA,QAAMmB,MAAM,GAAG,MAAM;AACnB,UAAMC,QAAQ,GAAG,KAAjB;AACA,UAAMC,KAAK,GAAG,UAAd;AACA,UAAMC,IAAI,GACR,+EADF;AAEA,UAAMC,OAAO,GAAG,CACd;AACEC,MAAAA,IAAI,EAAE,QADR;AAEEC,MAAAA,OAAO,EAAE,IAFX;AAGEC,MAAAA,QAAQ,EAAE,MAAM7B,GAAG,CAACW,KAAJ,CAAUmB,UAAV,CAAqB3B,MAArB,EAA6B,UAA7B,EAAyC,IAAzC;AAHlB,KADc,EAMd;AACEwB,MAAAA,IAAI,EAAE;AADR,KANc,CAAhB;AAUAvB,IAAAA,SAAS,CAAC;AAAEmB,MAAAA,QAAF;AAAYC,MAAAA,KAAZ;AAAmBC,MAAAA,IAAnB;AAAyBC,MAAAA;AAAzB,KAAD,CAAT;AACD,GAhBD;;AAkBA,QAAMK,WAAW,GACf,iFADF;AAEA,QAAMC,aAAa,GAAG,8BAAtB;AAEA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,QAAQ,EAAE,CAACvB,OAFb;AAGE,IAAA,OAAO,EAAEa,MAHX;AAIE,IAAA,SAAS,oLAOLU,aAPK,yBAQLD,WARK,eAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,CADF;AAqBD","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\n\nimport GameContext, { DEFAULT } from \"../GameContext\";\nimport api from \"../Api\";\n\nexport default function BuyCard() {\n  const { phase, gameId, showModal } = useContext(GameContext);\n  const validPhase = [DEFAULT].includes(phase);\n  const [canBuy, setCanBuy] = useState(false);\n  const enabled = canBuy && validPhase;\n\n  useEffect(() => {\n    const fetchActions = async () => {\n      const { data: actions } = await api.games.actions(gameId);\n      const hasBuyCard = actions.some(a => a.type === \"buy_card\");\n      setCanBuy(hasBuyCard);\n    };\n    fetchActions();\n    const interval = setInterval(() => fetchActions(), api.POLL_EVERY);\n    return () => clearInterval(interval);\n  }, [gameId]);\n\n  const tryBuy = () => {\n    const disabled = false;\n    const title = \"Buy Card\";\n    const body =\n      \"It will cost you 1 grain, 1 ore and 1 wool. Are you sure you want to buy one?\";\n    const buttons = [\n      {\n        text: \"Accept\",\n        primary: true,\n        callback: () => api.games.playAction(gameId, \"buy_card\", null)\n      },\n      {\n        text: \"Cancel\"\n      }\n    ];\n    showModal({ disabled, title, body, buttons });\n  };\n\n  const TextClasses =\n    \"text-center text-xl self-center tracking-wider text-bold text-white font-cinzel\";\n  const CommonClasses = \"w-5/6 shadow-md rounded h-12\";\n\n  return (\n    <div>\n      <button\n        type=\"button\"\n        disabled={!enabled}\n        onClick={tryBuy}\n        className={`\n          h-16\n          bg-blue-800\n          w-full\n          hover:bg-blue-900\n          disabled:cursor-not-allowed\n          disabled:opacity-50\n          ${CommonClasses}\n          ${TextClasses}\n        `}\n      >\n        Buy Card\n      </button>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}