{"ast":null,"code":"import _slicedToArray from \"/home/agustina/Descargas/catan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/agustina/Descargas/catan/src/components/EndTurn.jsx\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport api from \"../Api\";\nimport GameContext, { DEFAULT } from \"../GameContext\";\nexport default function EndTurn() {\n  const _useContext = useContext(GameContext),\n        phase = _useContext.phase,\n        gameId = _useContext.gameId,\n        showModal = _useContext.showModal;\n\n  const validPhase = [DEFAULT].includes(phase);\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        canEndTurn = _useState2[0],\n        setCanEndTurn = _useState2[1];\n\n  const enabled = canEndTurn && validPhase;\n  useEffect(() => {\n    const fetchActions = async () => {\n      const _ref = await api.games.actions(gameId),\n            actions = _ref.data;\n\n      const endTurnAvailable = actions.some(a => a.type === \"end_turn\");\n      setCanEndTurn(endTurnAvailable);\n    };\n\n    fetchActions();\n    const interval = setInterval(() => fetchActions(), api.POLL_EVERY);\n    return () => clearInterval(interval);\n  }, [gameId]);\n\n  const FinishTurn = () => {\n    const disabled = false;\n    const title = \"End Turn\";\n    const body = \"Are you sure you want to end your turn?\";\n    const buttons = [{\n      text: \"Accept\",\n      primary: true,\n      callback: () => api.games.playAction(gameId, \"end_turn\", null)\n    }, {\n      text: \"Cancel\"\n    }];\n    showModal({\n      disabled,\n      title,\n      body,\n      buttons\n    });\n  };\n\n  const TextClasses = \"text-center text-xl self-center tracking-wider text-bold font-cinzel\";\n  const CommonClasses = \"w-5/6 shadow-md rounded h-12\";\n  return React.createElement(\"button\", {\n    type: \"button\",\n    disabled: !enabled,\n    onClick: FinishTurn,\n    className: \"\\n        h-16\\n        w-full\\n        bg-red-800\\n        hover:bg-red-900\\n        disabled:cursor-not-allowed\\n        disabled:opacity-50\\n        \".concat(CommonClasses, \"\\n        \").concat(TextClasses, \"\\n      \"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, \"End Turn\");\n}","map":{"version":3,"sources":["/home/agustina/Descargas/catan/src/components/EndTurn.jsx"],"names":["React","useState","useEffect","useContext","api","GameContext","DEFAULT","EndTurn","phase","gameId","showModal","validPhase","includes","canEndTurn","setCanEndTurn","enabled","fetchActions","games","actions","data","endTurnAvailable","some","a","type","interval","setInterval","POLL_EVERY","clearInterval","FinishTurn","disabled","title","body","buttons","text","primary","callback","playAction","TextClasses","CommonClasses"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AAEA,OAAOC,GAAP,MAAgB,QAAhB;AACA,OAAOC,WAAP,IAAsBC,OAAtB,QAAqC,gBAArC;AAEA,eAAe,SAASC,OAAT,GAAmB;AAAA,sBACKJ,UAAU,CAACE,WAAD,CADf;AAAA,QACxBG,KADwB,eACxBA,KADwB;AAAA,QACjBC,MADiB,eACjBA,MADiB;AAAA,QACTC,SADS,eACTA,SADS;;AAEhC,QAAMC,UAAU,GAAG,CAACL,OAAD,EAAUM,QAAV,CAAmBJ,KAAnB,CAAnB;;AAFgC,oBAGIP,QAAQ,CAAC,KAAD,CAHZ;AAAA;AAAA,QAGzBY,UAHyB;AAAA,QAGbC,aAHa;;AAIhC,QAAMC,OAAO,GAAGF,UAAU,IAAIF,UAA9B;AAEAT,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMc,YAAY,GAAG,YAAY;AAAA,mBACL,MAAMZ,GAAG,CAACa,KAAJ,CAAUC,OAAV,CAAkBT,MAAlB,CADD;AAAA,YACjBS,OADiB,QACvBC,IADuB;;AAE/B,YAAMC,gBAAgB,GAAGF,OAAO,CAACG,IAAR,CAAaC,CAAC,IAAIA,CAAC,CAACC,IAAF,KAAW,UAA7B,CAAzB;AACAT,MAAAA,aAAa,CAACM,gBAAD,CAAb;AACD,KAJD;;AAKAJ,IAAAA,YAAY;AACZ,UAAMQ,QAAQ,GAAGC,WAAW,CAAC,MAAMT,YAAY,EAAnB,EAAuBZ,GAAG,CAACsB,UAA3B,CAA5B;AACA,WAAO,MAAMC,aAAa,CAACH,QAAD,CAA1B;AACD,GATQ,EASN,CAACf,MAAD,CATM,CAAT;;AAWA,QAAMmB,UAAU,GAAG,MAAM;AACvB,UAAMC,QAAQ,GAAG,KAAjB;AACA,UAAMC,KAAK,GAAG,UAAd;AACA,UAAMC,IAAI,GAAG,yCAAb;AACA,UAAMC,OAAO,GAAG,CACd;AACEC,MAAAA,IAAI,EAAE,QADR;AAEEC,MAAAA,OAAO,EAAE,IAFX;AAGEC,MAAAA,QAAQ,EAAE,MAAM/B,GAAG,CAACa,KAAJ,CAAUmB,UAAV,CAAqB3B,MAArB,EAA6B,UAA7B,EAAyC,IAAzC;AAHlB,KADc,EAMd;AACEwB,MAAAA,IAAI,EAAE;AADR,KANc,CAAhB;AAUAvB,IAAAA,SAAS,CAAC;AAAEmB,MAAAA,QAAF;AAAYC,MAAAA,KAAZ;AAAmBC,MAAAA,IAAnB;AAAyBC,MAAAA;AAAzB,KAAD,CAAT;AACD,GAfD;;AAiBA,QAAMK,WAAW,GACf,sEADF;AAEA,QAAMC,aAAa,GAAG,8BAAtB;AAEA,SACE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,QAAQ,EAAE,CAACvB,OAFb;AAGE,IAAA,OAAO,EAAEa,UAHX;AAIE,IAAA,SAAS,oKAOLU,aAPK,uBAQLD,WARK,aAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF;AAmBD","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\n\nimport api from \"../Api\";\nimport GameContext, { DEFAULT } from \"../GameContext\";\n\nexport default function EndTurn() {\n  const { phase, gameId, showModal } = useContext(GameContext);\n  const validPhase = [DEFAULT].includes(phase);\n  const [canEndTurn, setCanEndTurn] = useState(false);\n  const enabled = canEndTurn && validPhase;\n\n  useEffect(() => {\n    const fetchActions = async () => {\n      const { data: actions } = await api.games.actions(gameId);\n      const endTurnAvailable = actions.some(a => a.type === \"end_turn\");\n      setCanEndTurn(endTurnAvailable);\n    };\n    fetchActions();\n    const interval = setInterval(() => fetchActions(), api.POLL_EVERY);\n    return () => clearInterval(interval);\n  }, [gameId]);\n\n  const FinishTurn = () => {\n    const disabled = false;\n    const title = \"End Turn\";\n    const body = \"Are you sure you want to end your turn?\";\n    const buttons = [\n      {\n        text: \"Accept\",\n        primary: true,\n        callback: () => api.games.playAction(gameId, \"end_turn\", null)\n      },\n      {\n        text: \"Cancel\"\n      }\n    ];\n    showModal({ disabled, title, body, buttons });\n  };\n\n  const TextClasses =\n    \"text-center text-xl self-center tracking-wider text-bold font-cinzel\";\n  const CommonClasses = \"w-5/6 shadow-md rounded h-12\";\n\n  return (\n    <button\n      type=\"button\"\n      disabled={!enabled}\n      onClick={FinishTurn}\n      className={`\n        h-16\n        w-full\n        bg-red-800\n        hover:bg-red-900\n        disabled:cursor-not-allowed\n        disabled:opacity-50\n        ${CommonClasses}\n        ${TextClasses}\n      `}\n    >\n      End Turn\n    </button>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}