{"ast":null,"code":"import _slicedToArray from \"/home/agustina/Descargas/catan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/agustina/Descargas/catan/src/components/CreateLobby.jsx\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport _ from \"lodash\";\nimport AuthContext from \"../AuthContext\";\nimport api from \"../Api\";\nimport CustomInput from \"./CustomInput\";\nconst TextClasses = \"text-center text-sm self-center tracking-wider text-bold\";\nconst CommonClasses = \"w-5/6 shadow-md rounded h-12\";\n\nfunction CreateLobbyPage() {\n  const _useContext = useContext(AuthContext),\n        auth = _useContext.auth;\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        boards = _useState2[0],\n        setBoards = _useState2[1];\n\n  const history = useHistory();\n\n  const _useState3 = useState(\"\".concat(_.startCase(auth.user), \"'s Lobby #\").concat(_.random(1000, 9999))),\n        _useState4 = _slicedToArray(_useState3, 2),\n        name = _useState4[0],\n        setName = _useState4[1];\n\n  const _useState5 = useState(),\n        _useState6 = _slicedToArray(_useState5, 2),\n        boardId = _useState6[0],\n        setBoardId = _useState6[1];\n\n  useEffect(() => {\n    const fetchRoom = async () => {\n      const res = await api.boards.all(); // TODO: Assumes there is always at least one board\n\n      setBoardId(res.data[0].id);\n      setBoards(res.data);\n    };\n\n    fetchRoom();\n  }, []);\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n\n    try {\n      const _ref = await api.lobbies.create(name, boardId),\n            room = _ref.data;\n\n      if (room && room.id) history.push(\"/lobby/\".concat(room.id));else history.push(\"/lobby\");\n    } catch (err) {\n      alert(\"Error: \".concat(err));\n    }\n  };\n\n  return React.createElement(\"div\", {\n    className: \"h-full bg-orange-300\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"py-5 flex flex-col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"font-cinzel text-gray-900 text-5xl lg:text-6xl lg:text-bold md:pt-5 lg:pt-5 self-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, \"Create Lobby\"), React.createElement(\"div\", {\n    className: \"w-11/12 md:w-8/12 self-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    className: \"flex flex-col justify-around mt-4 pb-12\",\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(CustomInput, {\n    type: \"text\",\n    placeholder: \"LOBBY NAME\",\n    value: name,\n    onChange: e => setName(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }), React.createElement(\"select\", {\n    className: \"rounded w-5/6 h-12 mb-4 bg-white text-center self-center\",\n    style: {\n      \"text-align-last\": \"center\"\n    },\n    value: boardId,\n    onChange: e => setBoardId(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, boards.map(board => React.createElement(\"option\", {\n    value: board.id,\n    key: board.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, board.name))), React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"CREATE LOBBY\",\n    className: \"\\n                mt-2\\n                h-12\\n                bg-blue-800\\n                text-white\\n                \".concat(CommonClasses, \"\\n                \").concat(TextClasses, \"\\n                \"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  })))));\n}\n\nexport default CreateLobbyPage;","map":{"version":3,"sources":["/home/agustina/Descargas/catan/src/components/CreateLobby.jsx"],"names":["React","useState","useEffect","useContext","useHistory","_","AuthContext","api","CustomInput","TextClasses","CommonClasses","CreateLobbyPage","auth","boards","setBoards","history","startCase","user","random","name","setName","boardId","setBoardId","fetchRoom","res","all","data","id","handleSubmit","event","preventDefault","lobbies","create","room","push","err","alert","e","target","value","map","board"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport _ from \"lodash\";\nimport AuthContext from \"../AuthContext\";\n\nimport api from \"../Api\";\nimport CustomInput from \"./CustomInput\";\n\nconst TextClasses = \"text-center text-sm self-center tracking-wider text-bold\";\nconst CommonClasses = \"w-5/6 shadow-md rounded h-12\";\n\nfunction CreateLobbyPage() {\n  const { auth } = useContext(AuthContext);\n  const [boards, setBoards] = useState([]);\n  const history = useHistory();\n  const [name, setName] = useState(\n    `${_.startCase(auth.user)}'s Lobby #${_.random(1000, 9999)}`\n  );\n  const [boardId, setBoardId] = useState();\n\n  useEffect(() => {\n    const fetchRoom = async () => {\n      const res = await api.boards.all();\n      // TODO: Assumes there is always at least one board\n      setBoardId(res.data[0].id);\n      setBoards(res.data);\n    };\n    fetchRoom();\n  }, []);\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    try {\n      const { data: room } = await api.lobbies.create(name, boardId);\n      if (room && room.id) history.push(`/lobby/${room.id}`);\n      else history.push(`/lobby`);\n    } catch (err) {\n      alert(`Error: ${err}`);\n    }\n  };\n\n  return (\n    <div className=\"h-full bg-orange-300\">\n      <div className=\"py-5 flex flex-col\">\n        <h1 className=\"font-cinzel text-gray-900 text-5xl lg:text-6xl lg:text-bold md:pt-5 lg:pt-5 self-center\">\n          Create Lobby\n        </h1>\n        <div className=\"w-11/12 md:w-8/12 self-center\">\n          <form\n            className=\"flex flex-col justify-around mt-4 pb-12\"\n            onSubmit={handleSubmit}\n          >\n            <CustomInput\n              type=\"text\"\n              placeholder=\"LOBBY NAME\"\n              value={name}\n              onChange={e => setName(e.target.value)}\n            />\n            <select\n              className=\"rounded w-5/6 h-12 mb-4 bg-white text-center self-center\"\n              style={{ \"text-align-last\": \"center\" }}\n              value={boardId}\n              onChange={e => setBoardId(e.target.value)}\n            >\n              {boards.map(board => (\n                <option value={board.id} key={board.id}>\n                  {board.name}\n                </option>\n              ))}\n            </select>\n            <input\n              type=\"submit\"\n              value=\"CREATE LOBBY\"\n              className={`\n                mt-2\n                h-12\n                bg-blue-800\n                text-white\n                ${CommonClasses}\n                ${TextClasses}\n                `}\n            />\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default CreateLobbyPage;\n"]},"metadata":{},"sourceType":"module"}